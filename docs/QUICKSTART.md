# Issue-Based Workflow Quick Start

## One-Time Setup

1. **Authenticate GitHub CLI:**
   ```bash
   gh auth login
   ```

2. **Add script to PATH (optional):**
   ```bash
   # Add to ~/.bashrc or ~/.zshrc
   export PATH="$PATH:$(pwd)/scripts"
   alias issue='./scripts/issue-workflow.sh'
   ```

## Daily Workflow

### Starting Work

**Option 1: Work on existing issue**
```bash
# List open issues
./scripts/issue-workflow.sh list

# Start working on issue #42
./scripts/issue-workflow.sh start 42
```

**Option 2: Create new issue**
```bash
# Create issue and start working
./scripts/issue-workflow.sh create "Add user authentication feature"
```

### Making Changes

1. **Make your code changes**

2. **Commit changes:**
   ```bash
   # Automatic commit with issue reference
   ./scripts/issue-workflow.sh commit "implement JWT middleware"

   # Or use git directly with proper format
   git add .
   git commit -m "feat: implement JWT middleware #42"
   ```

3. **Push and create PR:**
   ```bash
   ./scripts/issue-workflow.sh pr
   ```

### Finishing Work

1. **After PR is approved:**
   ```bash
   # Merge the PR (replace 42 with your PR number)
   ./scripts/issue-workflow.sh merge 42
   ```

2. **Clean up local branches:**
   ```bash
   ./scripts/issue-workflow.sh finish
   ```

## Common Commands

```bash
# Check current status
./scripts/issue-workflow.sh status

# List open issues
./scripts/issue-workflow.sh list

# Start issue #123
./scripts/issue-workflow.sh start 123

# Commit changes
./scripts/issue-workflow.sh commit "your message here"

# Create PR
./scripts/issue-workflow.sh pr

# Merge PR #42
./scripts/issue-workflow.sh merge 42

# Finish and clean up
./scripts/issue-workflow.sh finish
```

## Manual GitHub CLI Commands

### Issue Management
```bash
# Create issue
gh issue create --title "Bug: Login fails on Safari" --body "Description"

# List issues
gh issue list

# View issue
gh issue view 42

# Close issue
gh issue close 42
```

### Pull Request Management
```bash
# Create PR
gh pr create --title "feat: Add authentication" --body "Closes #42"

# List PRs
gh pr list

# View PR
gh pr view 42

# Review PR locally
gh pr checkout 42

# Merge PR
gh pr merge 42 --squash --delete-branch
```

## Best Practices

### Branch Naming
✅ Auto-generated by script: `issue-42-add-authentication`

### Commit Messages
✅ Script auto-formats: `feat: implement auth #42`

Or manually:
- `feat:` - new features
- `fix:` - bug fixes
- `docs:` - documentation
- `refactor:` - code refactoring
- `test:` - testing
- `chore:` - maintenance

### Workflow Rules
1. ✅ Always work in feature branches (never on main)
2. ✅ One branch per issue
3. ✅ Create PR before merging
4. ✅ Delete branches after merge
5. ✅ Keep main branch updated

## Example Full Cycle

```bash
# 1. Start new feature
./scripts/issue-workflow.sh create "Add password reset functionality"
# Creates issue #55 and branch issue-55-add-password-reset

# 2. Make changes and commit
# ... edit files ...
./scripts/issue-workflow.sh commit "implement password reset endpoint"
./scripts/issue-workflow.sh commit "add reset email template"

# 3. Create PR
./scripts/issue-workflow.sh pr
# Creates PR and outputs URL

# 4. After code review and approval, merge
./scripts/issue-workflow.sh merge 55

# 5. Clean up
./scripts/issue-workflow.sh finish
```

## Troubleshooting

### "GitHub CLI not authenticated"
```bash
gh auth login
```

### "Not on an issue branch"
Make sure you're on a feature branch:
```bash
./scripts/issue-workflow.sh status
```

### "Conflicts during merge"
```bash
# Update your branch with latest main
git fetch origin main
git rebase origin/main
# Resolve conflicts, then:
git rebase --continue
git push --force-with-lease
```

### "Accidental commit to main"
```bash
# Create branch with your changes
git branch issue-<number>-description
# Reset main to remote
git reset --hard origin/main
# Switch to feature branch
git checkout issue-<number>-description
```

## Additional Resources

- Full workflow documentation: [WORKFLOW.md](WORKFLOW.md)
- GitHub CLI manual: https://cli.github.com/manual/
- Git branching guide: https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging
