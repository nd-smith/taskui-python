============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-9.0.1, pluggy-1.6.0
rootdir: /home/nick/Projects/taskui-python
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: asyncio-1.3.0, cov-7.0.0, Faker-33.3.1, anyio-4.10.0
asyncio: mode=auto, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 490 items

tests/test_app.py .......................................                [  7%]
tests/test_column.py ...........................F......................  [ 18%]
tests/test_column2_updates.py sssss...s..                                [ 20%]
tests/test_config.py ...........                                         [ 22%]
tests/test_database.py .................                                 [ 26%]
tests/test_detail_panel.py ............F..                               [ 29%]
tests/test_integration_mvp.py ...FFF..F...                               [ 31%]
tests/test_keyboard_navigation.py ...F.................                  [ 35%]
tests/test_list_bar.py .......................                           [ 40%]
tests/test_list_service.py ......................                        [ 45%]
tests/test_logging_config.py ...............................             [ 51%]
tests/test_models.py ......................................              [ 59%]
tests/test_persistence.py ..........                                     [ 61%]
tests/test_printer_service.py ..................                         [ 64%]
tests/test_refresh_helper.py ........                                    [ 66%]
tests/test_task_editing.py .........F........                            [ 70%]
tests/test_task_item.py ................................................ [ 80%]
......                                                                   [ 81%]
tests/test_task_modal.py .....................                           [ 85%]
tests/test_task_service.py ............................................. [ 94%]
......                                                                   [ 95%]
tests/test_ui_components.py ........F...........                         [100%]

=================================== FAILURES ===================================
___________ TestTaskColumnTaskUpdates.test_empty_to_populated_state ____________
tests/test_column.py:486: in test_empty_to_populated_state
    assert column.get_selected_task() is None  # No selection set yet
E   AssertionError: assert Task(id=UUID('8e40a954-3b5f-4fa3-a178-1b6dd066c655'), title='Task 1', notes=None, is_completed=False, parent_id=None, ...', completion_percentage=0.0, has_children=False, can_have_children_in_column1=True, can_have_children_in_column2=True) is None
E    +  where Task(id=UUID('8e40a954-3b5f-4fa3-a178-1b6dd066c655'), title='Task 1', notes=None, is_completed=False, parent_id=None, ...', completion_percentage=0.0, has_children=False, can_have_children_in_column1=True, can_have_children_in_column2=True) = get_selected_task()
E    +    where get_selected_task = TaskColumn().get_selected_task
_________ TestDetailPanelIntegration.test_different_completion_states __________
tests/test_detail_panel.py:288: in test_different_completion_states
    assert "Archived" in text3
E   AssertionError: assert 'Archived' in '[bold #66D9EF]TASK[/bold #66D9EF]\n  Sample Task [#A6E22E]âœ“ Complete[/#A6E22E]\n\n[bold #66D9EF]STATUS[/bold #66D9EF]...[#AE81FF]2025-01-14 12:00:00[/#AE81FF]\n\n[bold #66D9EF]NOTES[/bold #66D9EF]\n  [italic]This is a test task[/italic]\n'
_______ TestMVPIntegration.test_nested_task_hierarchy_creation_via_modal _______
tests/test_integration_mvp.py:270: in test_nested_task_hierarchy_creation_via_modal
    assert column2._tasks[0].level == 0  # Context-relative
E   AssertionError: assert 1 == 0
E    +  where 1 = Task(id=UUID('d8e6d1dc-74e2-48d8-b005-50a423bef27e'), title='Child Task', notes=None, is_completed=False, parent_id=UU..., completion_percentage=0.0, has_children=False, can_have_children_in_column1=False, can_have_children_in_column2=True).level
___________ TestMVPIntegration.test_column2_updates_on_task_creation ___________
tests/test_integration_mvp.py:346: in test_column2_updates_on_task_creation
    assert column2._tasks[0].level == 0  # Context-relative
E   AssertionError: assert 1 == 0
E    +  where 1 = Task(id=UUID('4f325e76-89b9-4962-8122-3068573a68bf'), title='Child in Column 2', notes=None, is_completed=False, paren..., completion_percentage=0.0, has_children=False, can_have_children_in_column1=False, can_have_children_in_column2=True).level
____________ TestMVPIntegration.test_all_crud_operations_end_to_end ____________
tests/test_integration_mvp.py:408: in test_all_crud_operations_end_to_end
    assert column1._tasks[0].title == "Updated CRUD Task"
E   AssertionError: assert 'CRUD Test Task' == 'Updated CRUD Task'
E     
E     - Updated CRUD Task
E     + CRUD Test Task
_________ TestMVPIntegration.test_column2_updates_on_column1_selection _________
tests/test_integration_mvp.py:614: in test_column2_updates_on_column1_selection
    assert len(column2._tasks) == 2
E   AssertionError: assert 3 == 2
E    +  where 3 = len([Task(id=UUID('80ea7b47-dc6b-4542-89c3-7fad72b717e5'), title='Parent 1 Child 1', notes=None, is_completed=False, paren... completion_percentage=0.0, has_children=False, can_have_children_in_column1=False, can_have_children_in_column2=True)])
E    +    where [Task(id=UUID('80ea7b47-dc6b-4542-89c3-7fad72b717e5'), title='Parent 1 Child 1', notes=None, is_completed=False, paren... completion_percentage=0.0, has_children=False, can_have_children_in_column1=False, can_have_children_in_column2=True)] = TaskColumn(id='column-2')._tasks
___________ TestKeybindings.test_letter_keybindings_case_insensitive ___________
tests/test_keyboard_navigation.py:66: in test_letter_keybindings_case_insensitive
    assert "a,A" in binding_dict
E   AssertionError: assert 'a,A' in {'1': 'switch_list_1', '2': 'switch_list_2', '3': 'switch_list_3', '4': 'switch_list_4', ...}
____ TestEditTaskServiceIntegration.test_update_task_preserves_other_fields ____
tests/test_task_editing.py:242: in test_update_task_preserves_other_fields
    assert updated_task.created_at == original_created_at
E   AssertionError: assert datetime.datetime(2025, 11, 21, 16, 56, 36, 931070) == datetime.datetime(2025, 11, 21, 16, 56, 36, 931070, tzinfo=datetime.timezone.utc)
E    +  where datetime.datetime(2025, 11, 21, 16, 56, 36, 931070) = Task(id=UUID('6c22e9ed-523a-483a-8d18-8bff0f4d61d7'), title='New Title', notes='Original notes', is_completed=False, p...', completion_percentage=0.0, has_children=False, can_have_children_in_column1=True, can_have_children_in_column2=True).created_at
__________________ TestTaskItem.test_task_item_level_classes ___________________
tests/test_ui_components.py:142: in test_task_item_level_classes
    assert "level-0" in item0.classes
E   AssertionError: assert 'level-0' in frozenset()
E    +  where frozenset() = TaskItem().classes
=============================== warnings summary ===============================
../../.local/lib/python3.10/site-packages/pydantic/_internal/_config.py:323
../../.local/lib/python3.10/site-packages/pydantic/_internal/_config.py:323
  /home/nick/.local/lib/python3.10/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

tests/test_app.py::TestActionMethodsTaskOperations::test_action_delete_task_shows_not_implemented_notification
  /home/nick/Projects/taskui-python/tests/test_app.py:734: RuntimeWarning: coroutine 'TaskUI.action_delete_task' was never awaited
    app.action_delete_task()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
SKIPPED [1] tests/test_column2_updates.py:19: _make_levels_context_relative method removed during nesting refactor
SKIPPED [1] tests/test_column2_updates.py:54: _make_levels_context_relative method removed during nesting refactor
SKIPPED [1] tests/test_column2_updates.py:79: _make_levels_context_relative method removed during nesting refactor
SKIPPED [1] tests/test_column2_updates.py:116: _make_levels_context_relative method removed during nesting refactor
SKIPPED [1] tests/test_column2_updates.py:125: _make_levels_context_relative method removed during nesting refactor
SKIPPED [1] tests/test_column2_updates.py:175: _make_levels_context_relative method removed during nesting refactor
FAILED tests/test_column.py::TestTaskColumnTaskUpdates::test_empty_to_populated_state
FAILED tests/test_detail_panel.py::TestDetailPanelIntegration::test_different_completion_states
FAILED tests/test_integration_mvp.py::TestMVPIntegration::test_nested_task_hierarchy_creation_via_modal
FAILED tests/test_integration_mvp.py::TestMVPIntegration::test_column2_updates_on_task_creation
FAILED tests/test_integration_mvp.py::TestMVPIntegration::test_all_crud_operations_end_to_end
FAILED tests/test_integration_mvp.py::TestMVPIntegration::test_column2_updates_on_column1_selection
FAILED tests/test_keyboard_navigation.py::TestKeybindings::test_letter_keybindings_case_insensitive
FAILED tests/test_task_editing.py::TestEditTaskServiceIntegration::test_update_task_preserves_other_fields
FAILED tests/test_ui_components.py::TestTaskItem::test_task_item_level_classes
======= 9 failed, 475 passed, 6 skipped, 3 warnings in 82.28s (0:01:22) ========
